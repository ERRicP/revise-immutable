!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("revise",[],n):"object"==typeof exports?exports.revise=n():e.revise=n()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){o(e,n,t[n])})}return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.r(n),t.d(n,"getValue",function(){return s}),t.d(n,"setValue",function(){return d});var i=function(e){for(var n=/^([\w\$]+|(?:\[(?:(?:\[.*\])|[^\]])*\]))(?:\[|\.|$)/,t=[];e.length;){var r=e.match(n);if(null==r||r.length<2)throw"invalid expression at: >"+e;t.push(r[1]),e=e.substr(r[0].length+(r[0].endsWith("[")?-1:0))}return t},c={find:function(e,n){return e.findIndex(n)},remove:function(e){return"$remove_".concat(e)},insert:function(e){return"$insert_".concat(e)},append:function(){return"$append"}},l=Object.getOwnPropertyNames(c),f=l.map(function(e){return c[e]}),a=function(e,n){var t=r({},n),o=[t];return{tokens:e.map(function(e){var n=e.startsWith("[")?function(e,n,t){var r=u(new Array(n.length)).map(function(e,n){return"$"+(n+1)}),o=u(n);return e=e.replace(/^\[find\((.*)\)\]$/,"find($$1, $1)"),Function.apply(null,u(r).concat(u(t&&[]||l),["return ".concat(e.replace(/^\[|\]$/g,""))])).apply(null,u(o).concat(u(t&&[]||f)))}(e,o):e;return t=null==t?null:t[n],o.unshift(t),n}),pointers:o.reverse()}},p=function(e){return/^\$(?:remove_\d+|insert_\d+|append)$/.test(e)},s=function(e,n){return a(i(n),e).pointers.pop()||null},d=function(e,n,t){var o=a(i(n),e),c=o.tokens,l=o.pointers,f=0,s=r({},l[f++]),d=s;return c.every(function(e,n){var o=l[f++],i=n==c.length-1?"function"==typeof t?t.apply(null,l.slice(0,f).reverse()):t:function(e,n){return null!=e&&Array.isArray(e)||!isNaN(parseInt(n))||p(n)}(o,c[n+1])?u(o||[]):r({},o||{});if(Array.isArray(d)&&p(e)){var a=function(e,n,t){if(/^\$remove_\d+$/.test(n))return e.splice(n.split("_")[1],1),{removed:!0};if(/^\$insert_\d+$/.test(n)){var r=parseInt(n.split("_")[1]);return e.splice(r,0,t),{newToken:r}}if(/^\$append+$/.test(n)){var o=e.length;return e.splice(o,0,t),{newToken:o}}}(d,e,i),s=a.newToken;if(a.removed)return!1;d=d[s]=i}else d=d[e]=i;return!0}),s},y={get:s,set:function(e,n,t){for(var r=null,o=Array.prototype.slice.call(arguments).slice(1);o.length;o=o.slice(2))r=d.apply(null,[r||e].concat(u(o)));return r}};n.default=y}])});
//# sourceMappingURL=main.js.map