!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("revise",[],n):"object"==typeof exports?exports.revise=n():e.revise=n()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";function t(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(n){o(e,n,r[n])})}return e}function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.r(n),r.d(n,"getValue",function(){return s}),r.d(n,"setValue",function(){return d}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=arguments[1],o=0;o<r;){var i=n[o];if(e.call(t,i,o,n))return o;o++}return-1},configurable:!0,writable:!0});var u=function(e){e=e.replace(/\n/g,"");for(var n=/^([\w\$]+|(?:\[(?:(?:\[.*\])|[^\]])*\]))(?:\[|\.|$)/,r=[];e.length;){var t=e.match(n);if(null==t||t.length<2)throw"invalid expression at: >"+e;r.push(t[1]),e=e.substr(t[0].length+(t[0].endsWith("[")?-1:0))}return r},f={find:function(e,n){return e.findIndex(n)},findOrAppend:function(e,n){var r=e.findIndex(n);return-1==r?e.length:r},remove:function(e){return"$remove_".concat(e)},insert:function(e){return"$insert_".concat(e)},append:function(){return"$append"}},c=Object.getOwnPropertyNames(f),l=c.map(function(e){return f[e]}),a=function(e,n){var r=t({},n),o=[r];return{tokens:e.map(function(e){var n=e.startsWith("[")?function(e,n,r){var t=i(new Array(n.length)).map(function(e,n){return"$"+(n+1)}),o=i(n);return e=e.replace(/^\[find(OrAppend)?\((.*)\)\]$/,"find$1($$1, $2)"),Function.apply(null,i(t).concat(i(r&&[]||c),["return ".concat(e.replace(/^\[|\]$/g,""))])).apply(null,i(o).concat(i(r&&[]||l)))}(e,o):e;return r=null==r?null:r[n],o.unshift(r),n}),pointers:o.reverse()}},p=function(e){return/^\$(?:remove_\d+|insert_\d+|append)$/.test(e)},s=function(e,n){return a(u(n),e).pointers.pop()||null},d=function(e,n,r){var o=a(u(n),e),f=o.tokens,c=o.pointers,l=0,s=t({},c[l++]),d=s;return f.every(function(e,n){var o=c[l++],u=n==f.length-1?"function"==typeof r?r.apply(null,c.slice(0,l).reverse()):r:function(e,n){return null!=e&&Array.isArray(e)||!isNaN(parseInt(n))||p(n)}(o,f[n+1])?i(o||[]):t({},o||{});if(Array.isArray(d)&&p(e)){var a=function(e,n,r){if(/^\$remove_\d+$/.test(n))return e.splice(n.split("_")[1],1),{removed:!0};if(/^\$insert_\d+$/.test(n)){var t=parseInt(n.split("_")[1]);return e.splice(t,0,r),{newToken:t}}if(/^\$append+$/.test(n)){var o=e.length;return e.splice(o,0,r),{newToken:o}}}(d,e,u),s=a.newToken;if(a.removed)return!1;d=d[s]=u}else d=d[e]=u;return!0}),s},y={get:s,set:function(e,n,r){for(var t=null,o=Array.prototype.slice.call(arguments).slice(1);o.length;o=o.slice(2))t=d.apply(null,[t||e].concat(i(o)));return t}};n.default=y}])});
//# sourceMappingURL=main.js.map